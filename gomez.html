<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<title>Main Page</title>
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0a1/jquery.mobile-1.0a1.min.css" />
	<script src="http://code.jquery.com/jquery-1.4.3.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.0a1/jquery.mobile-1.0a1.min.js"></script>
</head>
<body>
	<div data-role="page">
		<div data-role="header"><h1>Main Page</h1></div>
		<div data-role="content"><p><a href="map.html">Map</a></p></div>
	</div>
	<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
	<script type="text/javascript">
		// When map page opens get location and display map
		$('.page-map').live("pagecreate", function() {
			if(navigator.geolocation) {
				navigator.geolocation.getCurrentPosition(function(position){
					initialize(position.coords.latitude,position.coords.longitude);
				});
			}
		});
		
		function initialize(lat,lng) {
			var latlng = new google.maps.LatLng(lat, lng);
			var myOptions = {
				zoom: 8,
				center: latlng,
				mapTypeId: google.maps.MapTypeId.ROADMAP
		    };
		    var map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);
			 var point = new google.maps.LatLng(lat, lng);
    var marker = new google.maps.Marker({
        position:point,
        map:map,
        title:'Hello VTS',
        draggable:true,
    });  
		}
	</script>
</body>
</html>

